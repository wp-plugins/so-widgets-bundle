jQuery(function(e){e(".sow-carousel-wrapper").each(function(){var t=e(this),a=t.closest(".sow-carousel-container").parent(),n=t.find(".sow-carousel-items"),s=t.find(".sow-carousel-item"),o=s.eq(0),i=0,r=1,l=!1,c=s.length,u=t.data("found-posts"),f=c==u,d=o.width()+parseInt(o.css("margin-right")),w=function(){0>i&&(i=0),i>=t.find(".sow-carousel-item").length-1&&(i=t.find(".sow-carousel-item").length-1,l||f||(l=!0,r++,n.append('<li class="sow-carousel-item sow-carousel-loading"></li>'),e.get(t.data("ajax-url"),{query:t.data("query"),action:"sow_carousel_load",paged:r},function(a,s){var o=e(a.html);o.appendTo(n).hide().fadeIn(),t.find(".sow-carousel-loading").remove(),c=t.find(".sow-carousel-item").length,f=c==u,l=!1}))),n.css("transition-duration","0.45s"),n.css("margin-left",-(d*i)+"px")};a.on("click","a.sow-carousel-previous",function(e){e.preventDefault(),i-=1,w()}),a.on("click","a.sow-carousel-next",function(e){e.preventDefault(),i+=1,w()});var g,m=!1,p=0,v=0,h=0,D=0;t.swipe({excludedElements:"",triggerOnTouchEnd:!0,threshold:75,swipeStatus:function(e,t,a,n,s,o,r){if("start"==t)v=-(d*i),D=(new Date).getTime(),clearInterval(g);else if("move"==t){"left"==a&&(n*=-1),I(v+n);var l=(new Date).getTime(),c=(l-D)/1e3;h=(n-p)/c,D=l,p=n}else if("end"==t)if(m=!0,"left"==a&&(n*=-1),Math.abs(h)>400){h*=.1;var u=(new Date).getTime(),f=0;g=setInterval(function(){var e=((new Date).getTime()-u)/1e3;f+=h*e;var t=v+n+f,s=30,o=Math.abs(h)-s<0;"left"==a?h+=s:h-=s,(o||!I(t))&&(clearInterval(g),T())},20)}else T();else"cancel"==t&&w()}});var I=function(e){return 50>e&&e>-(d*c)?(n.css("transition-duration","0s"),n.css("margin-left",e+"px"),!0):!1},T=function(){var e=parseInt(n.css("margin-left"));i=Math.abs(Math.round(e/d)),w()};t.on("click",".sow-carousel-item a",function(e){m&&(e.preventDefault(),m=!1)})})});